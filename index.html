<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Library</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #f7f3e9 0%, #e8dcc0 50%, #d4c5a9 100%);
            min-height: 100vh;
            color: #5d4e37;
        }

        .auth-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f7f3e9 0%, #e8dcc0 50%, #d4c5a9 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .auth-box {
            background: rgba(248, 246, 240, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(139, 125, 107, 0.3);
            border: 1px solid rgba(196, 181, 153, 0.3);
        }

        .auth-box h2 {
            color: #5d4e37;
            margin-bottom: 20px;
            font-weight: 400;
            font-size: 2rem;
        }

        .auth-box p {
            color: #6b5b73;
            margin-bottom: 30px;
            font-style: italic;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }

        .container.show {
            display: block;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: #6b5b73;
            position: relative;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(139, 125, 107, 0.2);
            font-weight: 400;
            letter-spacing: 2px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.8;
            font-style: italic;
        }

        .user-info {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(248, 246, 240, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            font-size: 0.9rem;
            color: #6b5b73;
        }

        .logout-btn {
            background: #d4c5a9;
            color: #5d4e37;
            border: none;
            padding: 5px 10px;
            border-radius: 15px;
            cursor: pointer;
            margin-left: 10px;
            font-size: 0.8rem;
        }

        .controls {
            background: rgba(248, 246, 240, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(139, 125, 107, 0.15);
            border: 1px solid rgba(196, 181, 153, 0.3);
        }

        .control-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-row:last-child {
            margin-bottom: 0;
        }

        input, select, button {
            padding: 12px 16px;
            border: 2px solid #c4b599;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Georgia', serif;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #8b7d6b;
            box-shadow: 0 0 0 3px rgba(139, 125, 107, 0.1);
        }

        button {
            background: linear-gradient(135deg, #8b7d6b, #6b5b73);
            color: #f8f6f0;
            border: none;
            cursor: pointer;
            font-weight: 500;
            text-transform: lowercase;
            letter-spacing: 1px;
            border-radius: 25px;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(139, 125, 107, 0.3);
            background: linear-gradient(135deg, #6b5b73, #8b7d6b);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .add-btn {
            background: linear-gradient(135deg, #7a6b54, #9c8b7a);
        }

        .search-section {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
        }

        .filter-section {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .product-card {
            background: #faf8f3;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(139, 125, 107, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(196, 181, 153, 0.2);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(135deg, #8b7d6b, #6b5b73);
        }

        .product-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(139, 125, 107, 0.2);
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .product-title {
            font-size: 1.4rem;
            font-weight: 500;
            color: #5d4e37;
            margin-bottom: 5px;
        }

        .product-category {
            background: linear-gradient(135deg, #a08b72, #8b7d6b);
            color: #f8f6f0;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 400;
            font-style: italic;
        }

        .product-details {
            margin-bottom: 20px;
        }

        .product-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(196, 181, 153, 0.3);
        }

        .product-detail:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 500;
            color: #6b5b73;
        }

        .detail-value {
            color: #5d4e37;
        }

        .product-description {
            color: #8a7968;
            line-height: 1.6;
            margin-bottom: 20px;
            font-style: italic;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        .edit-btn {
            background: linear-gradient(135deg, #9c8b7a, #a08b72);
            font-size: 14px;
            padding: 8px 16px;
        }

        .delete-btn {
            background: linear-gradient(135deg, #8b6b6b, #7a5a5a);
            font-size: 14px;
            padding: 8px 16px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(93, 78, 55, 0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #faf8f3;
            padding: 40px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 40px rgba(139, 125, 107, 0.3);
            border: 1px solid rgba(196, 181, 153, 0.3);
        }

        .modal-header {
            margin-bottom: 30px;
            text-align: center;
        }

        .modal-header h2 {
            color: #5d4e37;
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 400;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #6b5b73;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
        }

        textarea {
            height: 100px;
            resize: vertical;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .cancel-btn {
            background: #d4c5a9;
            color: #5d4e37;
        }

        .stats {
            background: rgba(248, 246, 240, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(139, 125, 107, 0.15);
            border: 1px solid rgba(196, 181, 153, 0.3);
        }

        .stats h3 {
            color: #5d4e37;
            margin-bottom: 10px;
            font-size: 1.3rem;
            font-weight: 400;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
        }

        .stat-item {
            background: linear-gradient(135deg, #8b7d6b, #a08b72);
            color: #f8f6f0;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 400;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6b5b73;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            opacity: 0.8;
            font-weight: 400;
        }

        .empty-state p {
            opacity: 0.6;
            margin-bottom: 20px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6b5b73;
        }

        .error {
            background: rgba(255, 200, 200, 0.9);
            color: #8b0000;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .sync-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(248, 246, 240, 0.95);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #6b5b73;
            z-index: 100;
        }

        .sync-status.syncing {
            background: rgba(255, 243, 205, 0.95);
        }

        .sync-status.error {
            background: rgba(255, 200, 200, 0.95);
            color: #8b0000;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .control-row {
                flex-direction: column;
            }
            
            .search-section,
            .filter-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }

            .user-info {
                position: static;
                margin-bottom: 20px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div id="authContainer" class="auth-container">
        <div class="auth-box">
            <h2>Welcome to Your Product Library</h2>
            <p>Please sign in to access your products from any device</p>
            <button onclick="signInWithGoogle()" id="signInBtn">sign in with google</button>
            <div id="authError" class="error" style="display: none; margin-top: 20px;"></div>
        </div>
    </div>

    <div class="sync-status" id="syncStatus" style="display: none;">● synced</div>

    <div class="container" id="mainContainer">
        <div class="header">
            <div class="user-info" id="userInfo" style="display: none;">
                <span id="userName"></span>
                <button onclick="signOut()" class="logout-btn">sign out</button>
            </div>
            <h1>Product Library</h1>
            <p>Manage and organize your products with style</p>
        </div>

        <div id="errorContainer"></div>

        <div class="controls">
            <div class="control-row">
                <div class="search-section">
                    <input type="text" id="searchInput" placeholder="Search products..." class="search-input">
                    <button onclick="clearSearch()">clear</button>
                </div>
            </div>
            
            <div class="control-row">
                <div class="filter-section">
                    <select id="categoryFilter">
                        <option value="">all categories</option>
                    </select>
                    <select id="sortBy">
                        <option value="name">sort by name</option>
                        <option value="category">sort by category</option>
                        <option value="price">sort by price</option>
                        <option value="date">sort by date added</option>
                    </select>
                    <button onclick="openModal()" class="add-btn">add product</button>
                </div>
            </div>
        </div>

        <div id="loadingContainer" class="loading">
            <p>loading your products...</p>
        </div>

        <div id="productsContainer" class="products-grid" style="display: none;"></div>

        <div class="stats" id="statsContainer" style="display: none;">
            <h3>library statistics</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="totalProducts">0</div>
                    <div class="stat-label">total products</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalCategories">0</div>
                    <div class="stat-label">categories</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalValue">$0</div>
                    <div class="stat-label">total value</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">add new product</h2>
            </div>
            <form id="productForm">
                <div class="form-group">
                    <label for="productName">product name *</label>
                    <input type="text" id="productName" required>
                </div>
                
                <div class="form-group">
                    <label for="productCategory">category *</label>
                    <input type="text" id="productCategory" required>
                </div>
                
                <div class="form-group">
                    <label for="productPrice">price</label>
                    <input type="number" id="productPrice" step="0.01" min="0">
                </div>
                
                <div class="form-group">
                    <label for="productSku">sku</label>
                    <input type="text" id="productSku">
                </div>
                
                <div class="form-group">
                    <label for="productStock">stock quantity</label>
                    <input type="number" id="productStock" min="0">
                </div>
                
                <div class="form-group">
                    <label for="productDescription">description</label>
                    <textarea id="productDescription" placeholder="product description..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" onclick="closeModal()" class="cancel-btn">cancel</button>
                    <button type="submit" id="submitBtn">add product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase configuration - YOU NEED TO REPLACE THIS WITH YOUR OWN CONFIG
        const firebaseConfig = {
          apiKey: "AIzaSyD88b3EXr5Sc5MK1n1iadUeFDTqyxhpaAs",
          authDomain: "possessions-988a8.firebaseapp.com",
          projectId: "possessions-988a8",
          storageBucket: "possessions-988a8.firebasestorage.app",
          messagingSenderId: "170290770064",
          appId: "1:170290770064:web:2bc3c9f6e8706e1994a815",
          measurementId: "G-CBK7S6Q8RS"
        };

        // Initialize Firebase
        let app, auth, db, currentUser = null;
        let products = [];
        let editingId = null;

        // Initialize Firebase when page loads
        document.addEventListener('DOMContentLoaded', function() {
            try {
                app = firebase.initializeApp(firebaseConfig);
                auth = firebase.auth();
                db = firebase.firestore();

                // Auth state listener
                auth.onAuthStateChanged(user => {
                    if (user) {
                        currentUser = user;
                        showMainApp();
                        loadProducts();
                    } else {
                        currentUser = null;
                        showAuthScreen();
                    }
                });
            } catch (error) {
                showError('Firebase configuration needed. Please follow the setup instructions below.');
                console.error('Firebase initialization error:', error);
            }
        });

        // Authentication functions
        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).catch(error => {
                showAuthError('Sign in failed: ' + error.message);
            });
        }

        function signOut() {
            auth.signOut();
        }

        function showAuthScreen() {
            document.getElementById('authContainer').style.display = 'flex';
            document.getElementById('mainContainer').classList.remove('show');
        }

        function showMainApp() {
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('mainContainer').classList.add('show');
            document.getElementById('userName').textContent = currentUser.displayName || currentUser.email;
            document.getElementById('userInfo').style.display = 'block';
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        // Firestore functions
        function getProductsCollection() {
            return db.collection('users').doc(currentUser.uid).collection('products');
        }

        function showSyncStatus(status) {
            const syncStatus = document.getElementById('syncStatus');
            syncStatus.style.display = 'block';
            syncStatus.className = 'sync-status';
            
            switch(status) {
                case 'syncing':
                    syncStatus.textContent = '● syncing...';
                    syncStatus.classList.add('syncing');
                    break;
                case 'synced':
                    syncStatus.textContent = '● synced';
                    setTimeout(() => {
                        syncStatus.style.display = 'none';
                    }, 2000);
                    break;
                case 'error':
                    syncStatus.textContent = '● sync error';
                    syncStatus.classList.add('error');
                    break;
            }
        }

        // Load products from Firestore
        function loadProducts() {
            if (!currentUser) return;

            document.getElementById('loadingContainer').style.display = 'block';
            document.getElementById('productsContainer').style.display = 'none';
            document.getElementById('statsContainer').style.display = 'none';

            getProductsCollection().orderBy('dateAdded', 'desc').onSnapshot(snapshot => {
                products = [];
                snapshot.forEach(doc => {
                    products.push({ id: doc.id, ...doc.data() });
                });
                
                document.getElementById('loadingContainer').style.display = 'none';
                document.getElementById('productsContainer').style.display = 'grid';
                document.getElementById('statsContainer').style.display = 'block';
                
                renderProducts();
                updateStats();
                updateCategoryFilter();
                showSyncStatus('synced');
            }, error => {
                showError('Failed to load products: ' + error.message);
                showSyncStatus('error');
            });
        }

        // Save product to Firestore
        async function saveProduct(productData) {
            if (!currentUser) return;

            showSyncStatus('syncing');
            
            try {
                if (editingId !== null) {
                    // Update existing product
                    await getProductsCollection().doc(editingId).update({
                        ...productData,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    editingId = null;
                } else {
                    // Add new product
                    await getProductsCollection().add({
                        ...productData,
                        dateAdded: firebase.firestore.FieldValue.serverTimestamp(),
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
            } catch (error) {
                showError('Failed to save product: ' + error.message);
                showSyncStatus('error');
            }
        }

        // Delete product from Firestore
        async function deleteProduct(id) {
            if (!currentUser) return;
            if (!confirm('Are you sure you want to delete this product?')) return;

            showSyncStatus('syncing');
            
            try {
                await getProductsCollection().doc(id).delete();
            } catch (error) {
                showError('Failed to delete product: ' + error.message);
                showSyncStatus('error');
            }
        }

        // UI functions (same as before but adapted for Firebase)
        function openModal(product = null) {
            const modal = document.getElementById('productModal');
            const form = document.getElementById('productForm');
            const title = document.getElementById('modalTitle');
            const submitBtn = document.getElementById('submitBtn');

            if (product) {
                editingId = product.id;
                title.textContent = 'edit product';
                submitBtn.textContent = 'update product';
                
                document.getElementById('productName').value = product.name || '';
                document.getElementById('productCategory').value = product.category || '';
                document.getElementById('productPrice').value = product.price || '';
                document.getElementById('productSku').value = product.sku || '';
                document.getElementById('productStock').value = product.stock || '';
                document.getElementById('productDescription').value = product.description || '';
            } else {
                editingId = null;
                title.textContent = 'add new product';
                submitBtn.textContent = 'add product';
                form.reset();
            }

            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('productModal').style.display = 'none';
            document.getElementById('productForm').reset();
            editingId = null;
        }

        // Handle form submission
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const productData = {
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                price: parseFloat(document.getElementById('productPrice').value) || 0,
                sku: document.getElementById('productSku').value,
                stock: parseInt(document.getElementById('productStock').value) || 0,
                description: document.getElementById('productDescription').value
            };

            saveProduct(productData);
            closeModal();
        });

        // Render products (same logic as before)
        function renderProducts() {
            const container = document.getElementById('productsContainer');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const sortBy = document.getElementById('sortBy').value;

            let filteredProducts = products.filter(product => {
                const matchesSearch = !searchTerm || 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm) ||
                    (product.description && product.description.toLowerCase().includes(searchTerm));
                
                const matchesCategory = !categoryFilter || product.category === categoryFilter;
                
                return matchesSearch && matchesCategory;
            });

            // Sort products
            filteredProducts.sort((a, b) => {
                switch(sortBy) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'category':
                        return a.category.localeCompare(b.category);
                    case 'price':
                        return (b.price || 0) - (a.price || 0);
                    case 'date':
                        if (a.dateAdded && b.dateAdded) {
                            return b.dateAdded.seconds - a.dateAdded.seconds;
                        }
                        return 0;
                    default:
                        return 0;
                }
            });

            if (filteredProducts.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <h3>no products found</h3>
                        <p>try adjusting your search or filters, or add your first product!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filteredProducts.map(product => `
                <div class="product-card">
                    <div class="product-header">
                        <div>
                            <div class="product-title">${product.name}</div>
                        </div>
                        <div class="product-category">${product.category}</div>
                    </div>
                    
                    <div class="product-details">
                        ${product.price ? `
                            <div class="product-detail">
                                <span class="detail-label">price:</span>
                                <span class="detail-value">$${product.price.toFixed(2)}</span>
                            </div>
                        ` : ''}
                        ${product.sku ? `
                            <div class="product-detail">
                                <span class="detail-label">sku:</span>
                                <span class="detail-value">${product.sku}</span>
                            </div>
                        ` : ''}
                        ${product.stock !== undefined ? `
                            <div class="product-detail">
                                <span class="detail-label">stock:</span>
                                <span class="detail-value">${product.stock} units</span>
                            </div>
                        ` : ''}
                        <div class="product-detail">
                            <span class="detail-label">added:</span>
                            <span class="detail-value">${product.dateAdded ? new Date(product.dateAdded.seconds * 1000).toLocaleDateString() : 'unknown'}</span>
                        </div>
                    </div>
                    
                    ${product.description ? `
                        <div class="product-description">${product.description}</div>
                    ` : ''}
                    
                    <div class="product-actions">
                        <button onclick="openModal(${JSON.stringify(product).replace(/"/g, '&quot;')})" class="edit-btn">edit</button>
                        <button onclick="deleteProduct('${product.id}')" class="delete-btn">delete</button>
                    </div>
                </div>
            `).join('');
        }

        // Update statistics
        function updateStats() {
            const totalProducts = products.length;
            const categories = [...new Set(products.map(p => p.category))].length;
            const totalValue = products.reduce((sum, p) => sum + (p.price || 0), 0);

            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('totalCategories').textContent = categories;
            document.getElementById('totalValue').textContent = `${totalValue.toFixed(2)}`;
        }

        // Update category filter dropdown
        function updateCategoryFilter() {
            const categoryFilter = document.getElementById('categoryFilter');
            const categories = [...new Set(products.map(p => p.category))].sort();
            
            const currentValue = categoryFilter.value;
            categoryFilter.innerHTML = '<option value="">all categories</option>';
            
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                categoryFilter.appendChild(option);
            });
            
            categoryFilter.value = currentValue;
        }

        // Clear search
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            renderProducts();
        }

        // Error handling
        function showError(message) {
            const errorContainer = document.getElementById('errorContainer');
            errorContainer.innerHTML = `<div class="error">${message}</div>`;
            setTimeout(() => {
                errorContainer.innerHTML = '';
            }, 5000);
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', renderProducts);
        document.getElementById('categoryFilter').addEventListener('change', renderProducts);
        document.getElementById('sortBy').addEventListener('change', renderProducts);

        // Close modal when clicking outside
        document.getElementById('productModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>

    <!-- Setup Instructions (remove after configuration) -->
    <div id="setupInstructions" style="position: fixed; bottom: 20px; left: 20px; background: rgba(248, 246, 240, 0.95); padding: 20px; border-radius: 15px; max-width: 400px; font-size: 0.9rem; color: #5d4e37; z-index: 1001; display: none;">
        <h4 style="margin-bottom: 10px;">🔧 Setup Required</h4>
        <p style="margin-bottom: 10px;">To use this app, you need to:</p>
        <ol style="margin-left: 20px; margin-bottom: 15px;">
            <li>Create a Firebase project at <a href="https://console.firebase.google.com" target="_blank" style="color: #6b5b73;">console.firebase.google.com</a></li>
            <li>Enable Authentication (Google sign-in)</li>
            <li>Enable Firestore Database</li>
            <li>Replace the Firebase config in the code</li>
        </ol>
        <button onclick="this.parentElement.style.display='none'" style="background: #8b7d6b; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer;">got it</button>
    </div>
</body>
</html>
